<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GroVia - Grow Farm Via Us</title>

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="./assets/css/style.css">
  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet">

  <!-- 
    - preload banner
  -->
  <link rel="preload" href="./assets/images/hero-banner.png" as="image">
<style>
   * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f7;
      margin: 0;
      padding: 0;
    }
    .container2 {
      max-width: 480px;
      margin: auto;
      padding: 15px;
      padding-top: 100px;
    }
    .create-post {
      background: white;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .create-post input, .create-post button {
      width: 100%;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      font-size: 15px;
      border: 1px solid #ccc;
    }
    .create-post button {
      background: #4CAF50;
      color: white;
      font-weight: bold;
      border: none;
      transition: 0.3s;
    }
    .create-post button:hover {
      background: #388E3C;
    }
    .post {
      background: white;
      border-radius: 15px;
      margin-bottom: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }
    .user-info img {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      margin-right: 12px;
    }
    .post-header button {
      background: none;
      border: none;
      color: red;
      font-size: 18px;
      margin-left: auto;
      cursor: pointer;
    }
    .post-image {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
    }
    .post-actions {
      display: flex;
      align-items: center;
      padding: 10px 15px 0;
      font-size: 22px;
    }
    .post-actions ion-icon {
      margin-right: 16px;
      cursor: pointer;
      transition: transform 0.3s, color 0.3s;
    }
    .post-actions ion-icon.liked {
      color: #e91e63;
      transform: scale(1.3);
    }
    .likes {
      padding: 4px 15px 0;
      font-size: 15px;
      display: flex;
      align-items: center;
    }
    .likes ion-icon {
      color: #e91e63;
      margin-right: 6px;
    }
    .caption {
      padding: 0 15px 10px;
      font-size: 15px;
    }
    .caption strong {
      margin-right: 5px;
    }
    .comments {
      padding: 0 15px 10px;
      font-size: 14px;
      max-height: 120px;
      overflow-y: auto;
      color: #555;
    }
    .comment-box {
      padding: 0 15px 15px;
      border-top: 1px solid #eee;
    }
    .comment-box input {
      width: 100%;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid #ccc;
      font-size: 14px;
      outline: none;
    }
    

</style>
</head>

<body id="top">

  <!-- 
    - #HEADER
  -->

     <header class="header" data-header>
        <div class="container">

            <!-- Overlay for mobile nav -->
            <div class="overlay" data-overlay></div>

            <!-- Logo -->
            <a href="index.html" class="logo">
                <img src="./assets/images/logo.png" width="160" height="50" alt="GroVia Logo">
            </a>

            <!-- Hamburger button -->
            <button class="nav-open-btn" data-nav-open-btn aria-label="Open Menu">
      <ion-icon name="menu-outline"></ion-icon>
    </button>

            <!-- Main navigation -->
            <nav class="navbar" data-navbar>

                <!-- Close button for mobile nav -->
                <button class="nav-close-btn" data-nav-close-btn aria-label="Close Menu">
        <ion-icon name="close-outline"></ion-icon>
      </button>

                <!-- Logo inside nav (optional, mostly for mobile) -->
                <a href="index.html" class="logo">
                    <img src="./assets/images/logo.png" width="190" height="50" alt="GroVia Logo">
                </a>

                <!-- Navigation links -->
                 <ul class="navbar-list">
                    <li class="navbar-item"><a href="index.html" class="navbar-link">Crop Details</a></li>
                    <li class="navbar-item"><a href="ferti.html" class="navbar-link">Ferti Tips</a></li>
                    <li class="navbar-item"><a href="product.html" class="navbar-link">Hardware</a></li>
                    <li class="navbar-item"><a href="fertibuy.html" class="navbar-link">Fertilizer's</a></li>
                    <li class="navbar-item"><a href="gov.html" class="navbar-link">Gov Stuff's</a></li>
                    <li class="navbar-item"><a href="post.html" class="navbar-link">Community</a></li>
                </ul>

                <!-- User actions -->
                <ul class="nav-action-list">

                    <!-- Search icon -->
                    <li>
                        <button class="nav-action-btn" aria-label="Search">
            <ion-icon name="search-outline" aria-hidden="true"></ion-icon>
            <span class="nav-action-text">Search</span>
          </button>
                    </li>

                    <!-- Login / Register (optional) -->
                    <li>
                        <a href="login.html" class="nav-action-btn">
                            <ion-icon name="person-outline" aria-hidden="true"></ion-icon>
                            <span class="nav-action-text">Login / Register</span>
                        </a>
                    </li>

                    <!-- Logout -->
                    <li>
                        <button class="nav-action-btn" id="logoutBtn">
            <ion-icon name="log-out-outline" aria-hidden="true"></ion-icon>
            <span class="nav-action-text">Logout</span>
          </button>
                    </li>

                    <!-- Welcome & Address -->
                    <li class="nav-action-btn" style="flex-direction: column; align-items: flex-start;">
                        <span class="nav-action-text" id="welcomeMsg" style="color: #0066cc;"></span>
                        <small id="address" style="color: #333;"></small>
                    </li>

                </ul>
            </nav>
        </div>
    </header>

  
  <main> 
<div class="container2">
  <div class="create-post">
    <input type="text" id="newCaption" placeholder="Share your farming experience..." />
    <input type="file" id="newImage" accept="image/*" />
    <button onclick="createPost()">Post</button>
  </div>
  <div id="feed"></div>
</div>


  <a href="#top" class="go-top-btn" data-go-top>
    <ion-icon name="arrow-up-outline"></ion-icon>
  </a>

  <div class="bottom-nav">
    <a href="index.html">
      <ion-icon name="home-outline"></ion-icon>
      <span>Home</span>
    </a>
    <a href="product.html">
      <ion-icon name="pricetags-outline"></ion-icon>
      <span>Products</span>
    </a>
    <a href="post.html">
      <ion-icon name="Add"></ion-icon>
      <span> Post</span>
    </a>
    <a href="tem.html">
      <ion-icon name="partly-sunny-outline"></ion-icon>
      <span>Temparature</span>
    </a>
    <a href="contact.html">
      <ion-icon name="call-outline"></ion-icon>
      <span>Contact</span>
    </a>
  </div>
  </main>



  <!-- 
    - custom js link
  -->
  <script src="./assets/js/script.js"></script>

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


<script>
// GroVia - Advanced Community Script

const userProfile = JSON.parse(localStorage.getItem("userProfile")) || {
  name: "Guest",
  image: "https://i.pravatar.cc/100",
  mobile: "guest"
};
const userId = userProfile.mobile || "guest";

// 5+ rich sample posts with real crop images
const samplePosts = [
  {
    username: "Ravi Kumar",
    userImg: "https://i.pravatar.cc/100?u=1",
    ownerId: "demo1",
    caption: "🌾 My wheat crop flourished using drip irrigation!",
    img: "https://source.unsplash.com/400x300/?wheat,farm",
    likes: 14,
    likedBy: [],
    comments: ["Sita: Awesome!", "Karan: Well done!"]
  },
  {
    username: "Anita Desai",
    userImg: "https://i.pravatar.cc/100?u=2",
    ownerId: "demo2",
    caption: "Just harvested mustard — golden fields! 💛",
    img: "https://source.unsplash.com/400x300/?mustard,crop",
    likes: 9,
    likedBy: [],
    comments: []
  },
  {
    username: "Vikram Singh",
    userImg: "https://i.pravatar.cc/100?u=3",
    ownerId: "demo3",
    caption: "First time trying organic compost. Results are promising.",
    img: "https://source.unsplash.com/400x300/?organic,farming",
    likes: 7,
    likedBy: [],
    comments: []
  },
  {
    username: "Meena Patel",
    userImg: "https://i.pravatar.cc/100?u=4",
    ownerId: "demo4",
    caption: "Sugarcane harvest in full swing! 🚜",
    img: "https://source.unsplash.com/400x300/?sugarcane,farm",
    likes: 11,
    likedBy: [],
    comments: []
  },
  {
    username: "Suresh Lal",
    userImg: "https://i.pravatar.cc/100?u=5",
    ownerId: "demo5",
    caption: "Rain-fed paddy success this year! 🌧️🌾",
    img: "https://source.unsplash.com/400x300/?paddy,monsoon",
    likes: 12,
    likedBy: [],
    comments: []
  },
  {
    username: "Leela Sharma",
    userImg: "https://i.pravatar.cc/100?u=6",
    ownerId: "demo6",
    caption: "Started beekeeping beside my crops. 🐝",
    img: "https://source.unsplash.com/400x300/?beekeeping,agriculture",
    likes: 5,
    likedBy: [],
    comments: []
  }
];

function getPosts() {
  const local = JSON.parse(localStorage.getItem("posts")) || [];
  return local.length === 0 ? [...samplePosts] : local;
}

function savePosts(posts) {
  localStorage.setItem("posts", JSON.stringify(posts));
}

function createPost() {
  const caption = document.getElementById("newCaption").value.trim();
  const file = document.getElementById("newImage").files[0];
  if (!caption && !file) return showAlert("Please add a caption or image.");

  const newPost = {
    username: userProfile.name,
    userImg: userProfile.image,
    ownerId: userId,
    caption,
    img: "",
    likes: 0,
    likedBy: [],
    comments: []
  };

  const reader = new FileReader();
  reader.onload = function (e) {
    newPost.img = file ? e.target.result : "";
    const posts = getPosts();
    posts.unshift(newPost);
    savePosts(posts);
    renderPosts();
  };

  if (file) reader.readAsDataURL(file);
  else {
    const posts = getPosts();
    posts.unshift(newPost);
    savePosts(posts);
    renderPosts();
  }

  document.getElementById("newCaption").value = "";
  document.getElementById("newImage").value = "";
}

function renderPosts() {
  const feed = document.getElementById("feed");
  feed.innerHTML = "";
  let posts = getPosts();
  const mine = posts.filter(p => p.ownerId === userId);
  const others = posts.filter(p => p.ownerId !== userId);
  posts = [...mine, ...others];

  posts.forEach((p, i) => {
    const isOwner = p.ownerId === userId;
    const isLiked = p.likedBy.includes(userId);
    const post = document.createElement("div");
    post.className = "post";
    post.innerHTML = `
      <div class="post-header">
        <div class="user-info">
          <img src="${p.userImg}" alt="${p.username}" />
          <strong>${p.username}</strong>
        </div>
        ${isOwner ? `<button onclick="deletePost(${i})" title="Delete">🗑️</button>` : ""}
      </div>
      ${p.img ? `<img src="${p.img}" class="post-image" />` : ""}
      <div class="post-actions">
        <ion-icon name="${isLiked ? 'heart' : 'heart-outline'}" class="${isLiked ? 'liked' : ''}" onclick="likePost(${i})"></ion-icon>
        <ion-icon name="chatbubble-outline" onclick="toggleCommentBox(${i})"></ion-icon>
        <ion-icon name="share-social-outline" onclick="sharePost(${i})"></ion-icon>
      </div>
      <div class="likes">${p.likes} likes</div>
      <div class="caption"><strong>${p.username}</strong> ${p.caption}</div>
      <div class="comments" id="comments-${i}">
        ${p.comments.map(c => `<div class="comment">${c}</div>`).join("")}
      </div>
      <div class="comment-box" id="box-${i}" style="display:none;">
        <input type="text" placeholder="Write a comment..." onkeydown="commentOnPost(event, ${i}, this)" />
      </div>
    `;
    feed.appendChild(post);
  });
}

function likePost(i) {
  const posts = getPosts();
  const post = posts[i];
  if (post.likedBy.includes(userId)) {
    post.likes--;
    post.likedBy = post.likedBy.filter(uid => uid !== userId);
  } else {
    post.likes++;
    post.likedBy.push(userId);
  }
  savePosts(posts);
  renderPosts();
}

function toggleCommentBox(i) {
  const box = document.getElementById(`box-${i}`);
  box.style.display = box.style.display === "block" ? "none" : "block";
}

function commentOnPost(e, i, input) {
  if (e.key === "Enter" && input.value.trim()) {
    const posts = getPosts();
    posts[i].comments.push(`${userProfile.name}: ${input.value.trim()}`);
    savePosts(posts);
    renderPosts();
  }
}

function sharePost(i) {
  const post = getPosts()[i];
  navigator.clipboard.writeText(`${post.caption} - from GroVia`).then(() => {
    showAlert("📋 Post copied to clipboard!");
  });
}

function deletePost(i) {
  const posts = getPosts();
  if (posts[i].ownerId === userId && confirm("Delete this post?")) {
    posts.splice(i, 1);
    savePosts(posts);
    renderPosts();
  }
}

function showAlert(message) {
  let alertBox = document.getElementById("customAlert");
  if (alertBox) alertBox.remove();

  alertBox = document.createElement("div");
  alertBox.id = "customAlert";
  alertBox.style = `
    position: fixed;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 12px 24px;
    border-radius: 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    font-size: 15px;
    z-index: 9999;
    animation: fadeOut 3s ease forwards;
  `;
  alertBox.innerText = message;
  document.body.appendChild(alertBox);
  setTimeout(() => alertBox.remove(), 3000);
}

// Render posts on load
renderPosts();
</script>


</body>

</html>
