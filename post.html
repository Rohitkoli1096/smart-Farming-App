<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GroVia - Grow Farm Via Us</title>

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="./assets/css/style.css">
  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet">

  <!-- 
    - preload banner
  -->
  <link rel="preload" href="./assets/images/hero-banner.png" as="image">
<style>
   * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f7;
      margin: 0;
      padding: 0;
    }
    .container2 {
      max-width: 480px;
      margin: auto;
      padding: 15px;
      padding-top: 100px;
    }
    .create-post {
      background: white;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .create-post input, .create-post button {
      width: 100%;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 10px;
      font-size: 15px;
      border: 1px solid #ccc;
    }
    .create-post button {
      background: #4CAF50;
      color: white;
      font-weight: bold;
      border: none;
      transition: 0.3s;
    }
    .create-post button:hover {
      background: #388E3C;
    }
    .post {
      background: white;
      border-radius: 15px;
      margin-bottom: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .post-header {
      display: flex;
      align-items: center;
      padding: 12px 15px;
    }
    .user-info img {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      margin-right: 12px;
    }
    .post-header button {
      background: none;
      border: none;
      color: red;
      font-size: 18px;
      margin-left: auto;
      cursor: pointer;
    }
    .post-image {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
    }
    .post-actions {
      display: flex;
      align-items: center;
      padding: 10px 15px 0;
      font-size: 22px;
    }
    .post-actions ion-icon {
      margin-right: 16px;
      cursor: pointer;
      transition: transform 0.3s, color 0.3s;
    }
    .post-actions ion-icon.liked {
      color: #e91e63;
      transform: scale(1.3);
    }
    .likes {
      padding: 4px 15px 0;
      font-size: 15px;
      display: flex;
      align-items: center;
    }
    .likes ion-icon {
      color: #e91e63;
      margin-right: 6px;
    }
    .caption {
      padding: 0 15px 10px;
      font-size: 15px;
    }
    .caption strong {
      margin-right: 5px;
    }
    .comments {
      padding: 0 15px 10px;
      font-size: 14px;
      max-height: 120px;
      overflow-y: auto;
      color: #555;
    }
    .comment-box {
      padding: 0 15px 15px;
      border-top: 1px solid #eee;
    }
    .comment-box input {
      width: 100%;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid #ccc;
      font-size: 14px;
      outline: none;
    }
    

</style>
</head>

<body id="top">

  <!-- 
    - #HEADER
  -->

     <header class="header" data-header>
        <div class="container">

            <!-- Overlay for mobile nav -->
            <div class="overlay" data-overlay></div>

            <!-- Logo -->
            <a href="index.html" class="logo">
                <img src="./assets/images/logo.png" width="160" height="50" alt="GroVia Logo">
            </a>

            <!-- Hamburger button -->
            <button class="nav-open-btn" data-nav-open-btn aria-label="Open Menu">
      <ion-icon name="menu-outline"></ion-icon>
    </button>

            <!-- Main navigation -->
            <nav class="navbar" data-navbar>

                <!-- Close button for mobile nav -->
                <button class="nav-close-btn" data-nav-close-btn aria-label="Close Menu">
        <ion-icon name="close-outline"></ion-icon>
      </button>

                <!-- Logo inside nav (optional, mostly for mobile) -->
                <a href="index.html" class="logo">
                    <img src="./assets/images/logo.png" width="190" height="50" alt="GroVia Logo">
                </a>

                <!-- Navigation links -->
                 <ul class="navbar-list">
                    <li class="navbar-item"><a href="index.html" class="navbar-link">Crop Details</a></li>
                    <li class="navbar-item"><a href="ferti.html" class="navbar-link">Ferti Tips</a></li>
                    <li class="navbar-item"><a href="product.html" class="navbar-link">Hardware</a></li>
                    <li class="navbar-item"><a href="fertibuy.html" class="navbar-link">Fertilizer's</a></li>
                    <li class="navbar-item"><a href="gov.html" class="navbar-link">Gov Stuff's</a></li>
                    <li class="navbar-item"><a href="post.html" class="navbar-link">Community</a></li>
                </ul>

                <!-- User actions -->
                <ul class="nav-action-list">

                    <!-- Search icon -->
                    <li>
                        <button class="nav-action-btn" aria-label="Search">
            <ion-icon name="search-outline" aria-hidden="true"></ion-icon>
            <span class="nav-action-text">Search</span>
          </button>
                    </li>

                    <!-- Login / Register (optional) -->
                    <li>
                        <a href="login.html" class="nav-action-btn">
                            <ion-icon name="person-outline" aria-hidden="true"></ion-icon>
                            <span class="nav-action-text">Login / Register</span>
                        </a>
                    </li>

                    <!-- Logout -->
                    <li>
                        <button class="nav-action-btn" id="logoutBtn">
            <ion-icon name="log-out-outline" aria-hidden="true"></ion-icon>
            <span class="nav-action-text">Logout</span>
          </button>
                    </li>

                    <!-- Welcome & Address -->
                    <li class="nav-action-btn" style="flex-direction: column; align-items: flex-start;">
                        <span class="nav-action-text" id="welcomeMsg" style="color: #0066cc;"></span>
                        <small id="address" style="color: #333;"></small>
                    </li>

                </ul>
            </nav>
        </div>
    </header>

  
  <main> 
<div class="container2">
  <div class="create-post">
    <input type="text" id="newCaption" placeholder="Share your farming experience..." />
    <input type="file" id="newImage" accept="image/*" />
    <button onclick="createPost()">Post</button>
  </div>
  <div id="feed"></div>
</div>


  <a href="#top" class="go-top-btn" data-go-top>
    <ion-icon name="arrow-up-outline"></ion-icon>
  </a>

  <div class="bottom-nav">
    <a href="index.html">
      <ion-icon name="home-outline"></ion-icon>
      <span>Home</span>
    </a>
    <a href="product.html">
      <ion-icon name="pricetags-outline"></ion-icon>
      <span>Products</span>
    </a>
    <a href="post.html">
      <ion-icon name="Add"></ion-icon>
      <span> Post</span>
    </a>
    <a href="tem.html">
      <ion-icon name="partly-sunny-outline"></ion-icon>
      <span>Temparature</span>
    </a>
    <a href="contact.html">
      <ion-icon name="call-outline"></ion-icon>
      <span>Contact</span>
    </a>
  </div>
  </main>



  <!-- 
    - custom js link
  -->
  <script src="./assets/js/script.js"></script>

  <!-- 
    - ionicon link
  -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script>
  const yourProfile = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSZHdDuBUrPwHTEwgzZQxxRyCE9rQPDrqhssESn1vA6aEsNTKFfhYQb2cMwhoMlq11CctY&usqp=CAU";

  function getPosts() {
    return JSON.parse(localStorage.getItem("posts")) || [];
  }

  function savePosts(posts) {
    localStorage.setItem("posts", JSON.stringify(posts));
  }

  function createPost() {
    const caption = document.getElementById("newCaption").value.trim();
    const file = document.getElementById("newImage").files[0];
    if (!caption && !file) return alert("Please add text or image.");

    const reader = new FileReader();
    reader.onload = function (e) {
      const posts = getPosts();
      posts.unshift({
          username: localStorage.getItem("userProfile.name") || "You",
        userImg: yourProfile,
        img: file ? e.target.result : "",
        caption,
        likes: 0,
        liked: false,
        comments: [],
        owner: true // 👈 Mark as user's post
      });
      savePosts(posts);
      renderPosts();
    };

    if (file) reader.readAsDataURL(file);
    else {
      const posts = getPosts();
      posts.unshift({
       username: localStorage.getItem("userProfile.name") || "You",
        userImg: yourProfile,
        img: "",
        caption,
        likes: 0,
        liked: false,
        comments: [],
        owner: true // 👈 Mark as user's post
      });
      savePosts(posts);
      renderPosts();
    }

    document.getElementById("newCaption").value = "";
    document.getElementById("newImage").value = "";
  }

  function renderPosts() {
    const feed = document.getElementById("feed");
    feed.innerHTML = "";
    const posts = getPosts();
    posts.forEach((p, i) => {
      const div = document.createElement("div");
      div.className = "post";
      div.innerHTML = `
        <div class="post-header">
          <div class="user-info">
            <img src="${p.userImg}" />
            <strong>${p.username}</strong>
          </div>
          ${p.owner ? `<button onclick="deletePost(${i})" title="Delete Post">❌</button>` : ""}
        </div>
        ${p.img ? `<img src="${p.img}" class="post-image" />` : ""}
        <div class="post-actions">
          <ion-icon name="${p.liked ? 'heart' : 'heart-outline'}" class="${p.liked ? 'liked' : ''}" onclick="likePost(${i})"></ion-icon>
          <ion-icon name="chatbubble-outline" onclick="toggleCommentBox(${i})"></ion-icon>
          <ion-icon name="share-social-outline" onclick="sharePost(${i})"></ion-icon>
        </div>
        <div class="likes">
          <ion-icon name="heart-outline"></ion-icon>
          <span id="likes-${i}">${p.likes}</span> likes
        </div>
        <div class="caption"><strong>${p.username}</strong> ${p.caption}</div>
        <div class="comments" id="comments-${i}">
          ${p.comments.length ? p.comments.map(c => `<div class="comment">${c}</div>`).join("") : `<i style='color:gray;cursor:pointer;' onclick='toggleCommentBox(${i})'>Add a comment</i>`}
        </div>
        <div class="comment-box" id="box-${i}" style="display:none;">
          <input type="text" placeholder="Write a comment..." onkeydown="commentOnPost(event, ${i}, this)" />
        </div>
      `;
      feed.appendChild(div);
    });
  }

  function likePost(i) {
    const posts = getPosts();
    posts[i].liked = !posts[i].liked;
    posts[i].likes += posts[i].liked ? 1 : -1;
    savePosts(posts);
    renderPosts();
  }

  function toggleCommentBox(i) {
    const box = document.getElementById(`box-${i}`);
    box.style.display = box.style.display === "block" ? "none" : "block";
  }

  function commentOnPost(e, i, input) {
    if (e.key === "Enter" && input.value.trim()) {
      const posts = getPosts();
      posts[i].comments.push("You: " + input.value.trim());
      savePosts(posts);
      renderPosts();
    }
  }

  function sharePost(i) {
    const posts = getPosts();
    navigator.clipboard.writeText(`Check this post: ${posts[i].caption}`).then(() => {
      alert("Post caption copied to clipboard!");
    });
  }

  function deletePost(i) {
    const posts = getPosts();
    if (posts[i].owner) {
      if (confirm("Are you sure you want to delete this post?")) {
        posts.splice(i, 1);
        savePosts(posts);
        renderPosts();
      }
    } else {
      alert("You can't delete this post.");
    }
  }

  // Set sample posts with owner = false
  if (!localStorage.getItem("posts")) {
    savePosts([
      {
        username: "farmer_ravi",
        userImg: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRcCkHTRXBt_IfyYL6rkwNzNlSKLeVkisKLcg&s",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRdYPYvy4LeRO-fCKG2OYtoPTJ2HKyKgk8Ezw&s",
        caption: "Wheat field ready for harvest 🌾",
        likes: 0,
        liked: false,
        comments: [],
        owner: false
      },
      {
        username: "organic_kisan",
        userImg: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRW7dn2JurmQc-aEjo2zej01-frVTbgZ04JGQ&s",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_sAoFlybyAVhZsep6XdyHSYI9-q8UQELqUg&s",
        caption: "Fresh desi tomatoes from organic farm 🍅",
        likes: 0,
        liked: false,
        comments: [],
        owner: false
      },
      {
        username: "green_grower",
        userImg: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpy_6i4HFS5_K2Yv_fVw_vXx9lmlCJhMkHSg&s",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8430T_BS2XZsERGCA4Ru-XUoHEq1T2E1su0ViyvVy4sVQwvIwGwUdU8qeaiMNoOkHn90&usqp=CAU",
        caption: "Irrigation system in action 🚿🌱",
        likes: 0,
        liked: false,
        comments: [],
        owner: false
      },
      {
        username: "desi_farmer",
        userImg: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLCSB9VoaHQiGyUIN_th2_4__TRlRmrMYCdQ&s",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNqsu78nPcrSizylrLdOHmoBzKWl3HTeWY4Q&s",
        caption: "My bulls working hard in the field 🐂❤️",
        likes: 0,
        liked: false,
        comments: [],
        owner: false
      }
    ]);
  }

  renderPosts();
</script>
</body>

</html>
